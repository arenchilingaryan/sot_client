(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[9],{123:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){e.exports=a.p+"static/media/User.bff3404e.jpg"},217:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var n=a(57),r=a.n(n),l=a(58),i=a(0),c=a.n(i),o=a(11),s=a(26),u=a(60),m=a(27),p=a(9),f=a(12),d=a(18),E=a(20),b=function(e){var t=e.editHandler,a=e.changeHandler,n=e.form,r=e.loading,l=n.userName,i=n.birthday,o=n.phoneNumber,s=n.languages,u=n.age,m=n.about;return c.a.createElement("form",{onSubmit:t,className:"profile__editPage"},c.a.createElement("h1",null,"Fill out the required"),c.a.createElement("div",{className:"profile__editForm"},c.a.createElement("div",{className:"profile__edit-inputBlock"},c.a.createElement("label",{htmlFor:"userName"},"Username\xa0:\xa0"),c.a.createElement("input",{onChange:a,name:"userName",type:"text",value:l,className:"profile__edit-input"})),c.a.createElement("div",{className:"profile__edit-inputBlock"},c.a.createElement("label",{htmlFor:"birthday"},"Birthday\xa0:\xa0"),c.a.createElement("input",{onChange:a,name:"birthday",type:"text",value:i,className:"profile__edit-input"})),c.a.createElement("div",{className:"profile__edit-inputBlock"},c.a.createElement("label",{htmlFor:"phoneNumber"},"Phone Number\xa0:\xa0"),c.a.createElement("input",{onChange:a,name:"phoneNumber",type:"text",value:o,className:"profile__edit-input"})),c.a.createElement("div",{className:"profile__edit-inputBlock"},c.a.createElement("label",{htmlFor:"languages"},"Languages\xa0:\xa0"),c.a.createElement("input",{onChange:a,name:"languages",type:"text",value:s,className:"profile__edit-input"})),c.a.createElement("div",{className:"profile__edit-inputBlock"},c.a.createElement("label",{htmlFor:"age"},"Age\xa0:\xa0"),c.a.createElement("input",{onChange:a,name:"age",type:"text",value:u,className:"profile__edit-input"})),c.a.createElement("div",{className:"profile__edit-inputBlock"},c.a.createElement("label",{htmlFor:"about"},"About me\xa0:\xa0"),c.a.createElement("textarea",{onChange:a,className:"profile__edit-textarea profile__edit-input",value:m,name:"about"}))),r?c.a.createElement(E.a,null):c.a.createElement("button",{className:"profile__edit-button"},"Save"))};a(213);var _=Object(o.b)((function(e){return{profile:e.profilePage}}),(function(e){return{setData:function(t){return e(Object(s.b)(t))},setEdit:function(){return e(Object(s.c)())},updateData:function(t){return e(Object(s.d)(t))}}}))((function(e){var t=Object(i.useContext)(d.a),a=Object(u.a)(),n=a.request,o=a.loading,s=e.profile,E=s._id,_=s.about,g=s.userName,h=s.birthday,v=s.languages,N=s.email,O=s.phoneNumber,j=s.locationProfile,k=s.age,y=s.img,P=Object(i.useState)({img:y,userName:g,birthday:h,languages:v,email:N,phoneNumber:O,locationProfile:j,age:k,about:_,_id:E}),x=Object(f.a)(P,2),w=x[0],C=x[1],F=function(){var a=Object(l.a)(r.a.mark((function a(l){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l.preventDefault(),a.next=3,n("/api/profile/updateinfo","POST",Object(p.a)({},w),{Authorization:"Bearer ".concat(t.token)});case 3:a.sent&&(i={user:w,history:e.profile.history},e.setData(i),t.login(t.token,t.userId,t.userCount,t.email,w.userName));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return c.a.createElement(b,{loading:o,form:w,changeHandler:function(e){C(Object(p.a)(Object(p.a)({},w),{},Object(m.a)({},e.target.name,e.target.value)))},editHandler:F})})),g=a(15),h=a(14),v=(a(214),function(e){var t=e.profile,a=e.setEdit,n=t.userName;return c.a.createElement("div",{className:"profile__header"},c.a.createElement("div",{itemProp:"additionalName",className:"profile__header-nickname"},n),c.a.createElement("div",{className:"profile__header-edit"},c.a.createElement(h.a,{icon:g.a,onClick:a})))}),N=function(e){var t=e.idx,a=e.link,n=e.trafic,r=e.genre,l=e.amount,i=l*e.price;return c.a.createElement("div",{className:"history-table-block"},c.a.createElement("span",null," ",t," "),c.a.createElement("span",null,c.a.createElement("a",{itemProp:"identifier",target:"_blank",rel:"noopener noreferrer",href:a},a.substr(21))),c.a.createElement("span",null," ",n," "),c.a.createElement("span",null," ",r," "),c.a.createElement("span",null," ",l," "),c.a.createElement("span",{itemProp:"price"}," ",i,"$ "))};a(215);var O=Object(o.b)((function(e){return{profile:e.profilePage}}))((function(e){var t=e.profile,a=t.about,n=t.history;return c.a.createElement("div",{className:"profile__info"},c.a.createElement("div",{className:"profile__about profile__block"},c.a.createElement("h3",{className:"profile__title"},"about me"),c.a.createElement("div",null,a)),c.a.createElement("div",{className:"profile__history profile__block"},c.a.createElement("h3",{className:"profile__title"},"History"),n?c.a.createElement(i.Fragment,null,c.a.createElement("h3",null,"Total: ",n.length," "),c.a.createElement("div",{className:"profile__history-table"},c.a.createElement("div",{className:"history-table-block table-title-block"},c.a.createElement("span",null," # "),c.a.createElement("span",{itemProp:"identifier"}," Link "),c.a.createElement("span",null," View "),c.a.createElement("span",null," Genre "),c.a.createElement("span",null," Amount "),c.a.createElement("span",{itemProp:"price"}," Total price ")),n.map((function(e){return c.a.createElement(i.Fragment,{key:e.code},c.a.createElement(N,Object.assign({idx:1},e)))})))):c.a.createElement("div",null,"You don't have promoted history")))})),j=a(216),k=a.n(j),y=(a(123),function(e){var t=e.profile,a=e.loading,n=e.handleFileSelect,r=t.birthday,l=t.languages,i=t.email,o=t.phoneNumber,s=t.locationProfile,u=t.age,m=t.img;return c.a.createElement("div",{className:"profile__main-info"},c.a.createElement("div",{className:"profile__personal profile__block"},a?c.a.createElement(E.a,null):c.a.createElement("div",{className:"profile__image"},c.a.createElement("img",{className:"profile__userImg",itemProp:"image",src:""===m?k.a:"data:image/png;base64,".concat(m),alt:k.a}),c.a.createElement("div",{className:"profile__image-upload"},c.a.createElement("label",{htmlFor:"file-input"},c.a.createElement(h.a,{className:"profile__uploadIcon",icon:g.d})),c.a.createElement("input",{onChange:n,className:"file-input",id:"file-input",type:"file"}))),c.a.createElement("h3",{className:"profile__title"},"Personal"),c.a.createElement("div",{className:"profile__personal-content"},c.a.createElement("div",{className:"profile__personal-title"},c.a.createElement("span",{itemProp:"birthDate"},"Birthday"),c.a.createElement("span",null,"Age"),c.a.createElement("span",null,"Languages")),c.a.createElement("div",{className:"profile__personal-desc"},c.a.createElement("span",{itemProp:"birthDate"},"\xa0:\xa0 ",r," "),c.a.createElement("span",null,"\xa0:\xa0 ",u," "),c.a.createElement("span",null,"\xa0:\xa0 ",l)))),c.a.createElement("div",{className:"profile__contact profile__block"},c.a.createElement("h3",{itemProp:"contactPoint",className:"profile__title"},"Contact"),c.a.createElement("div",{className:"profile__contact-content"},c.a.createElement("div",{className:"profile__contact-icons"},c.a.createElement("span",{itemProp:"email"},c.a.createElement(h.a,{icon:g.b})),c.a.createElement("span",{itemProp:"telephone"},c.a.createElement(h.a,{icon:g.g})),c.a.createElement("span",{itemProp:"address"},c.a.createElement(h.a,{icon:g.f}))),c.a.createElement("div",{className:"profile__contact-desc"},c.a.createElement("span",{itemProp:"email"},"\xa0:\xa0 ",i," "),c.a.createElement("span",{itemProp:"telephone"},"\xa0:\xa0 ",o," "),c.a.createElement("span",{itemProp:"address"},"\xa0:\xa0 ",s," ")))))});var P=Object(o.b)((function(e){return{profile:e.profilePage}}),(function(e){return{updateImg:function(t){return e(Object(s.e)(t))}}}))((function(e){var t=Object(u.a)(),a=t.request,n=t.loading,o=Object(i.useContext)(d.a);return c.a.createElement(y,{handleFileSelect:function(t){var n=t.target.files[0],i=new FileReader;if(i.onload=function(){var t=Object(l.a)(r.a.mark((function t(n){var l,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=n.target.result,i=window.btoa(l),t.prev=2,t.next=5,a("/api/profile/updateimg","POST",{email:o.email,img:i},{Authorization:"Bearer ".concat(o.token)});case 5:if(t.sent){t.next=10;break}return t.abrupt("return",console.log("poka"));case 10:e.updateImg(i);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(2),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e){return t.apply(this,arguments)}}(),!n)return null;i.readAsBinaryString(n)},profile:e.profile,loading:n})}));a(217);var x=Object(o.b)((function(e){return{profile:e.profilePage}}),(function(e){return{setEdit:function(){return e(Object(s.c)())}}}))((function(e){var t=e.setEdit,a=e.profile;return c.a.createElement("div",{className:"page"},c.a.createElement("div",{itemScope:!0,itemProp:"http://schema.org/Person",className:"profile__inside__page"},c.a.createElement("div",{className:"profile__page-content"},e.profile.edit?c.a.createElement(_,null):c.a.createElement(i.Fragment,null,c.a.createElement(v,{setEdit:t,profile:a}),c.a.createElement("div",{className:"profile__content"},c.a.createElement(P,null),c.a.createElement(O,null))))))}));t.default=Object(o.b)((function(e){return{profile:e.profilePage}}),(function(e){return{setData:function(t){return e(Object(s.b)(t))},setEdit:function(){return e(Object(s.c)())}}}))((function(e){var t=Object(u.a)(),a=t.request,n=t.loading,o=Object(i.useContext)(d.a),s=Object(i.useCallback)(Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("/api/profile/getinfo","POST",{email:o.email,userId:o.userId},{Authorization:"Bearer ".concat(o.token)});case 3:n=t.sent,e.setData(n),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[o.email,o.userId,o.token,a,e.setData]);return Object(i.useEffect)((function(){s()}),[o.email,o.userId,o.token,a,e.setData,s]),c.a.createElement(i.Fragment,null,n?c.a.createElement(E.a,null):c.a.createElement(x,null))}))},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(57),r=a.n(n),l=a(58),i=a(12),c=a(0),o=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(null),s=Object(i.a)(o,2),u=s[0],m=s[1];return{loading:a,request:Object(c.useCallback)(function(){var e=Object(l.a)(r.a.mark((function e(t){var a,l,i,c,o,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",l=s.length>2&&void 0!==s[2]?s[2]:null,i=s.length>3&&void 0!==s[3]?s[3]:{},n(!0),e.prev=4,l&&(l=JSON.stringify(l),i["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:l,headers:i});case 8:return c=e.sent,e.next=11,c.json();case 11:if(o=e.sent,c.ok){e.next=14;break}throw new Error(o.message||"Try again");case 14:return n(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),n(!1),m(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:u,clearError:function(){return m(null)}}}}}]);
//# sourceMappingURL=9.c6aaaab0.chunk.js.map